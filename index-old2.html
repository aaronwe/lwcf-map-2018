<!DOCTYPE html>
<html lang="en">
<head>
    <title>Hello World</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--add required stylesheets-->
    <!--make sure you add bootstrap 3.3.7 rather than 4.0.0-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
    <!--leaflet css-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.3/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin="" />
    <!--animation-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <!--Google Font-->
    <link href="https://fonts.googleapis.com/css?family=Cairo" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/storymap.2.3.css">

    <!--add required libraries-->
    <!--leaflet-->
    <script src="https://unpkg.com/leaflet@1.3.3/dist/leaflet.js"
    integrity="sha512-tAGcCfR4Sc5ZP5ZoVz0quoZDYX5aCtEm/eu1KhSLj2c9eFrylXZknQYmxUssFaVJKvvc0dJQixhGjG2yXWiV9Q=="
    crossorigin=""></script>
    <!--jquery-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <!--boostrap-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!--leaflet.ajax for asynchronously adding geojson data-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
    <!--story map plugin-->
    <script src="js/storymap.2.3.min.js"></script>
    <!-- csv geojson plugin-->
    <script src="js/leaflet.geocsv.min.js"></script>
</head>
<body>
    <div id="storymap" class="container-fluid">
        <div class="row">
            <div class="col-sm-6 col-md-8 storymap-map"></div>
            <div class="col-sm-6 col-md-4 storymap-story">
                <section data-scene="overview">
                    <h2>The Land & Water Conservation Fund, 2014-2017</h2>
                    <p>All about LWCF.</p>
                </section>
            </div>
        </div>
    </div>
    <script type="text/javascript">

    var defaultIcon = {
        iconUrl: 'my-icon.png',
        iconSize: [38, 95],
        iconAnchor: [22, 94],
        popupAnchor: [-3, -76],
        shadowUrl: 'my-icon-shadow.png',
        shadowSize: [68, 95],
        shadowAnchor: [22, 94]
    };

    url = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQ4DISotlFsoIUoQe1RJLaTEmbuD8Hx5Glcyo1L4rbVdyjw_C_ZAyjxmb754ce6JZOYlFuDuowdLQtv/pub?gid=1632632246&single=true&output=csv';

    var layers = {
        allprojects: {
            layer: L.geoCsv.ajax(url, {
            })
        },
        basemap: {
            layer: L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
                attribution: 'LWCF data by Center for Western Priorities, Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
                maxZoom: 10,
                id: 'mapbox.outdoors',
                accessToken: 'pk.eyJ1IjoiY2VudGVyLWZvci13ZXN0ZXJuLXByaW9yaXRpZXMiLCJhIjoicDdmTEllZyJ9.Ox4hqPZ7mPtvidL69modKg'
            })
        }
    };

    var scenes = {
        overview: {
            lat: 39,
            lng: -98,
            zoom: 5,
            maxZoom: 10,
            minZoom: 3,
            dragging: true,
            scrollWheelZoom: true,
            layers: ['basemap', 'allprojects'],
            name: "All projects"
        }
    };

    $('#storymap').storymap({
        scenes: scenes,
        layers: layers,
        baselayer: layers.basemap,
        legend: true,
        loader: true,
        flyto: true,
        credits: "Built with<i class='glyphicon glyphicon-heart' style='color: red'></i> by the Center for Western Priorities",
        scalebar: true,
        scrolldown: false,
        progressline: true,
        navwidget: true,
        createMap: function () {
            var map = L.map($(".storymap-map")[0], {zoomControl: false}).setView([39, -98], 5);
            basemap = this.baselayer.layer.addTo(map);
            return map;
        }
    });
</script>
</body>
</html>
