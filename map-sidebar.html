<!DOCTYPE html>
<html>
<head>
  <title>Land & Water Conservation Fund &mdash; 2014-2017 Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- boostrap css -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <link rel="stylesheet" href="https://bootswatch.com/4/materia/bootstrap.min.css" />

  <!-- leaflet css -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.3/dist/leaflet.css"
  integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
  crossorigin=""/>

  <!-- markercluster, with custom styles defined locally -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="css/MarkerCluster.Default.css">

  <!--sidebar -->
  <link rel="stylesheet" href="css/leaflet-sidebar.min.css" />

  <!-- fullscreen control -->
  <link rel="stylesheet" href="css/Control.FullScreen.css" />

  <!-- awesome markers -->
  <link rel="stylesheet" href="css/leaflet.awesome-markers.css" />

  <!-- fontawesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">

  <!-- custom css -->
  <link rel="stylesheet" href="css/screen2.css" />

</head>
<body>
  <div id="sidebar" class="sidebar">
    <!-- Nav tabs -->
    <div class="sidebar-tabs">
      <ul role="tablist">
        <li class="active"><a href="#home" role="tab"><i class="fas fa-map-marked"></i></a></li>
        <li><a href="#legend" role="tab"><i class="fas fa-atlas"></i></a></li>
        <li><a href="http://westernpriorities.org/" role="tab" target="_blank"><i class="fa fa-home"></i></a></li>
      </ul>
    </div>

    <!-- Tab panes -->
    <div class="sidebar-content">
      <div class="sidebar-pane active" id="home">
        <h1 class="sidebar-header">
          LWCF 2014&ndash;2017
          <span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
        </h1>
        <h3 style="margin-top: 5px;">Mapping the Land&nbsp;&amp;&nbsp;Water Conservation&nbsp;Fund</h3>

        <p>There is arguably no program more critical to protecting
          and conserving America’s public lands than the <b>Land
            and Water Conservation Fund</b> (LWCF). Over its lifetime,
            LWCF has invested more than $17 billion, derived
            primarily from offshore oil drilling in federal waters, to
            protect critical lands, develop new recreation facilities in
            urban areas, preserve historic sites, and improve access
            to public lands and waters for hikers, hunters, anglers,
            boaters, and other outdoor enthusiasts.
          </p>

          <p>The Land and Water Conservation Fund is the primary
            source of funds for enhancing access to parks and
            public lands across the United States, guaranteeing that
            Americans from Maine to Texas to Montana benefit from
            our nation’s outdoor spaces. But unless Congress acts
            to reauthorize the program before the end of September
            2018, the Land and Water Conservation Fund is at risk
            of disappearing forever.
          </p>

          <p>On this map the <a href="http://westernpriorities.org/" target="_blank">Center for Western
            Priorities</a> quantifies
            the Land and Water Conservation Fund’s record of
            success by compiling an on-the-ground snapshot of U.S.
            public land and Forest Legacy program LWCF projects
            proposed during a four-year period, from 2014 to 2017.
            According to this analysis, <b>293 U.S. public land and Forest
              Legacy LWCF projects in 42 states</b> were successfully
              completed between 2014 and 2017, conserving
              <b>at least 431,000 acres</b> and protecting America’s parks
              and public lands from the threat of development.
            </p>

            <a href=""><button type="button" class="btn btn-primary">
              <table>
                <tr>
                  <td rowspan=2 style="padding: 0px 8px;">
                    <i class="fas fa-file-pdf fa-3x"></i>
                  </td><td align=left>Download the</td>
                </tr>
                <tr><td align=left>
                  Full report (PDF)</button></a></td>
                </tr>
              </table></a>
            </div>

            <div class="sidebar-pane" id="legend">
              <h1 class="sidebar-header">
                Legend
                <span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
              </h1>
            </div>

          </div>
        </div>

        <div id="map" class="sidebar-map"></div>

        <!-- load jquery -->
        <script src="https://unpkg.com/jquery@2.2.4/dist/jquery.min.js"></script>

        <!-- bootstrap js -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

        <!-- all the leaflet and plugins js -->
        <script src="https://unpkg.com/leaflet@1.3.3/dist/leaflet.js"
        integrity="sha512-tAGcCfR4Sc5ZP5ZoVz0quoZDYX5aCtEm/eu1KhSLj2c9eFrylXZknQYmxUssFaVJKvvc0dJQixhGjG2yXWiV9Q=="
        crossorigin=""></script>
        <script src="js/leaflet.awesome-markers.min.js"></script>
        <script src="https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster.js"></script>
        <script src="js/Control.FullScreen.js"></script>
        <script src="js/leaflet-sidebar.min.js"></script>

        <!-- actually build the map -->
        <script type="text/javascript">

        var tiles = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
          attribution: 'LWCF data by Center for Western Priorities, Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
          maxZoom: 8,
          id: 'mapbox.outdoors',
          accessToken: 'pk.eyJ1IjoiY2VudGVyLWZvci13ZXN0ZXJuLXByaW9yaXRpZXMiLCJhIjoicDdmTEllZyJ9.Ox4hqPZ7mPtvidL69modKg'
        })

        var map = L.map('map', {
          zoomControl: true
        })
        .setView([37, -99], 5)
        .addLayer(tiles);

        map.zoomControl.setPosition('bottomright');

        // Add layer for markercluster
        var markers = L.markerClusterGroup({
          maxClusterRadius: 30,
          spiderfyDistanceMultiplier: 1.5,
          showCoverageOnHover: false,
          spiderfyOnMaxZoom: true,
          singleMarkerMode: false
        });

        function createCustomIcon (feature, latlng) {
          switch (feature.properties.status) {
            case 'Completed':
            color = 'green';
            break;
            case 'Proposed, In Process':
            color = 'lightblue';
            break;
            case 'Proposed, Not Complete':
            color = 'beige';
            break;
            case 'Proposed, Data Pending':
            color = 'lightgray';
            break
            default:
            color = 'lightgray';
          }
          let myIcon = L.AwesomeMarkers.icon({
            icon: 'none',
            markerColor: color
          })
          return L.marker(latlng, { icon: myIcon })
        }

        //for the popupAnchor
        function onEachFeature(feature, layer) {
          baseText = '<p>' + feature.properties.state + '<br />'
          +'<span style="font-size:14px"><b>' + feature.properties.unit + '</b></span><br />'
          + feature.properties.program + ', ' + feature.properties.year + '</p><p>'
          + '<b>Status: </b>' + feature.properties.status + '<br/>'
          + '<b>Acres: </b>' + feature.properties.acres + '<br />'
          + '<b>Budget: </b>' + feature.properties.budget + '</p>';
          if (feature.properties.notes != "") {
            popupText = baseText + '<p style="font-size:9px">' + feature.properties.notes + '</p>'
          } else {
            popupText = baseText
          }
          layer.bindPopup(popupText);
        }

        // Use jQuery to load data from GeoJSON file and add the layer
        $.getJSON('data/data.geojson', function(data) {
          var geoJsonLayer = L.geoJson(data, {
            onEachFeature: onEachFeature,
            pointToLayer: createCustomIcon
          });
          // Add geoJsonLayer to markercluster group
          markers.addLayer(geoJsonLayer);
          // Add the markercluster group to the map
          map.addLayer(markers);
        });

        // Load the sidebar
        var sidebar = L.control.sidebar('sidebar').addTo(map);

        L.control.fullscreen({
          position: 'bottomright',
          title: 'Fullscreen',
          titleCancel: 'Exit fullscreen',
          content: '<i class="fas fa-expand fa-lg"></i>',
          forceSeparateButton: true, // force seperate button to detach from zoom buttons, default false
          forcePseudoFullscreen: false, // force use of pseudo full screen even if full screen API is available, default false
          fullscreenElement: document.body // document.getElementById('map').parentNode // Dom element to render in full screen, false by default, fallback to map._container
        }).addTo(map);

        map.on('enterFullscreen', function(){
          $('#map').offset({ top: 0, left: 0});
          // map.invalidateSize(true);
        });

        </script>
      </body>
      </html>
