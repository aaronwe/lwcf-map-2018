<!DOCTYPE html>
<html>
<head>
  <title>Land & Water Conservation Fund &mdash; 2014-2017 Map</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- load jquery -->
  <script src="https://unpkg.com/jquery@2.2.4/dist/jquery.min.js"></script>

  <!-- boostrap css -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

  <!-- leaflet css -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.3/dist/leaflet.css"
  integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
  crossorigin=""/>

  <!-- custom css -->
  <link rel="stylesheet" href="css/screen2.css" />

  <!-- markercluster -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.css" />
  <!--  use custom markercluster styles
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.Default.css" /> -->
  <link rel="stylesheet" href="css/MarkerCluster.Default.css">

  <!--sidebar -->
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/leaflet-sidebar.min.css" />

  <!-- awesome markers -->
  <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/1.5.2/css/ionicons.min.css">
  <link rel="stylesheet" href="css/leaflet.awesome-markers.css" />

</head>
<body>
  <div id="sidebar" class="sidebar">
    <!-- Nav tabs -->
    <div class="sidebar-tabs">
      <ul role="tablist">
        <li><a href="#home" role="tab"><i class="fa fa-bars"></i></a></li>
        <li><a href="#profile" role="tab"><i class="fa fa-user"></i></a></li>
        <li class="disabled"><a href="#messages" role="tab"><i class="fa fa-envelope"></i></a></li>
        <li><a href="https://github.com/Turbo87/sidebar-v2" role="tab" target="_blank"><i class="fa fa-github"></i></a></li>
      </ul>

      <ul role="tablist">
        <li><a href="#settings" role="tab"><i class="fa fa-gear"></i></a></li>
      </ul>
    </div>

    <!-- Tab panes -->
    <div class="sidebar-content">
      <div class="sidebar-pane" id="home">
        <h1 class="sidebar-header">
          sidebar-v2
          <span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
        </h1>

        <p>A responsive sidebar for mapping libraries like <a href="http://leafletjs.com/">Leaflet</a> or <a href="http://openlayers.org/">OpenLayers</a>.</p>

        <p class="lorem">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>

        <p class="lorem">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>

        <p class="lorem">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>

        <p class="lorem">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
      </div>

      <div class="sidebar-pane" id="profile">
        <h1 class="sidebar-header">Profile<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
      </div>

      <div class="sidebar-pane" id="messages">
        <h1 class="sidebar-header">Messages<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
      </div>

      <div class="sidebar-pane" id="settings">
        <h1 class="sidebar-header">Settings<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
      </div>
    </div>
  </div>

  <div id="map" class="sidebar-map"></div>

  <!-- bootstrap js -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

  <!-- all the leaflet and plugins js -->
  <script src="https://unpkg.com/leaflet@1.3.3/dist/leaflet.js"
  integrity="sha512-tAGcCfR4Sc5ZP5ZoVz0quoZDYX5aCtEm/eu1KhSLj2c9eFrylXZknQYmxUssFaVJKvvc0dJQixhGjG2yXWiV9Q=="
  crossorigin=""></script>
  <script src="js/leaflet.awesome-markers.min.js"></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster.js"></script>
  <script src="js/leaflet-sidebar.min.js"></script>

  <script type="text/javascript">

  var tiles = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
    attribution: 'LWCF data by Center for Western Priorities, Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
    maxZoom: 10,
    id: 'mapbox.outdoors',
    accessToken: 'pk.eyJ1IjoiY2VudGVyLWZvci13ZXN0ZXJuLXByaW9yaXRpZXMiLCJhIjoicDdmTEllZyJ9.Ox4hqPZ7mPtvidL69modKg'
  })

  var map = L.map('map')
  .setView([37, -99], 5)
  .addLayer(tiles);

  // Add layer for markercluster
  var markers = L.markerClusterGroup({
    maxClusterRadius: 30,
    singleMarkerMode: false
  });

  function createCustomIcon (feature, latlng) {
    switch (feature.properties.status) {
      case 'Completed':
      color = 'green';
      break;
      case 'In Process':
      color = 'lightblue';
      break;
      case 'Proposed':
      color = 'beige';
      break;
      case 'Unknown':
      color = 'lightgray';
      break
      default:
      color = 'lightgray';
    }
    let myIcon = L.AwesomeMarkers.icon({
      icon: 'none',
      markerColor: color
    })
    return L.marker(latlng, { icon: myIcon })
  }

  //for the popupAnchor
  function onEachFeature(feature, layer) {
    baseText = '<p>' + feature.properties.state + '<br />'
    +'<span style="font-size:14px"><b>' + feature.properties.unit + '</b></span><br />'
    + feature.properties.program + ', ' + feature.properties.year + '</p><p>'
    + '<b>Status: </b>' + feature.properties.status + '<br/>'
    + '<b>Acres: </b>' + feature.properties.acres + '<br />'
    + '<b>Budget: </b>' + feature.properties.budget + '</p>';
    if (feature.properties.notes != "") {
      popupText = baseText + '<p style="font-size:9px">' + feature.properties.notes + '</p>'
    } else {
      popupText = baseText
    }
    layer.bindPopup(popupText);
  }

  // Use jQuery to load data from GeoJSON file
  $.getJSON('data/data.geojson', function(data) {
    var geoJsonLayer = L.geoJson(data, {
      onEachFeature: onEachFeature,
      pointToLayer: createCustomIcon
    });
    // Add geoJsonLayer to markercluster group
    markers.addLayer(geoJsonLayer);
    // Add the markercluster group to the map
    map.addLayer(markers);
  });

  var sidebar = L.control.sidebar('sidebar').addTo(map);

</script>
</body>
</html>
