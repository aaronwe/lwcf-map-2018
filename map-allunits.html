<!DOCTYPE html>
<html>
<head>
  <title>Leaflet debug page</title>

  <!-- load jquery -->
  <script src="https://unpkg.com/jquery@2.2.4/dist/jquery.min.js"></script>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.3/dist/leaflet.css"
  integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
  crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.3.3/dist/leaflet.js"
  integrity="sha512-tAGcCfR4Sc5ZP5ZoVz0quoZDYX5aCtEm/eu1KhSLj2c9eFrylXZknQYmxUssFaVJKvvc0dJQixhGjG2yXWiV9Q=="
  crossorigin=""></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/screen2.css" />

  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.3.0/dist/MarkerCluster.Default.css" />
  <script src="https://unpkg.com/leaflet.markercluster@1.3.0/dist/leaflet.markercluster.js"></script>

</head>
<body>

  <div id="map"></div>

  <script type="text/javascript">

  var tiles = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
    attribution: 'LWCF data by Center for Western Priorities, Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
    maxZoom: 10,
    id: 'mapbox.outdoors',
    accessToken: 'pk.eyJ1IjoiY2VudGVyLWZvci13ZXN0ZXJuLXByaW9yaXRpZXMiLCJhIjoicDdmTEllZyJ9.Ox4hqPZ7mPtvidL69modKg'
  })

  var map = L.map('map')
  .setView([37, -89], 5)
  .addLayer(tiles);

  // Add layer for markercluster
  var markers = L.markerClusterGroup();

  //for the popupAnchor
  function onEachFeature(feature, layer) {
    layer.bindPopup('<p>' + feature.properties.state + '<br />'
    +'<span style="font-size:14px"><b>' + feature.properties.unit + '</b></span><br />'
    + feature.properties.program + ', ' + feature.properties.year + '</p><p>'
    + '<b>Status: </b>' + feature.properties.status + '<br/>'
    + '<b>Acres: </b>' + feature.properties.acres + '<br />'
    + '<b>Budget: </b>' + feature.properties.budget + '</p>'
  );
}

// Use jQuery to load data from GeoJSON file
$.getJSON('data/data.geojson', function(data) {
  var geoJsonLayer = L.geoJson(data, {
    onEachFeature: onEachFeature
  });
  // Add geoJsonLayer to markercluster group
  markers.addLayer(geoJsonLayer);
  // Add the markercluster group to the map
  map.addLayer(markers);
});


</script>
</body>
</html>
